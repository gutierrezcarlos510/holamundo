<script src="../../js/fileinput.min.js"></script>
<form id="formulario"  method="post" action="../usuario/guardar" enctype="multipart/form-data"
              	data-fv-framework="bootstrap"
              	data-fv-excluded="disabled"
    			data-fv-icon-valid="glyphicon glyphicon-ok"
    			data-fv-icon-invalid="glyphicon glyphicon-remove"
    			data-fv-icon-validating="glyphicon glyphicon-refresh">
            <div  id="modalAdicionar" class="modal fade">
              <div class="modal-dialog" style="width: 90%">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Adicionar Usuario</h4>
                  </div>
                  <div class="modal-body">
                  <div class="row">
                  <div class="col-md-3">
                  	<div class="form-group">
                      <label>Carnet de Identidad</label>
                      <input type="text" class="form-control input-sm" id="ci_per" name="ci_per" data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      	<label>Primer Apellido</label>
                      	<input type="text" class="form-control input-sm" id="priape_per" name="priape_per" data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      		<label>Telefono</label>
                      		<input type="text" class="form-control input-sm" id="tel_per" name="tel_per" data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      		<label>Email</label>
                      		<input type="email" class="form-control input-sm" id="ema_per" name="ema_per" data-fv-emailaddress="true">
                    </div>
                  </div>
                  <div class="col-md-3">
                  	<div class="form-group">
                      	<label>Nombre</label>
                    	<input type="text" class="form-control input-sm" id="nom_per1" name="nom_per" pattern="[A-Za-z]" data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      	<label>Segundo Apellido</label>
                      	<input type="text" class="form-control input-sm" id="segape_per" name="segape_per" >
                    </div>
                    <div class="form-group">
                      		<label>Domicilio</label>
                      		<input type="text" class="form-control input-sm" id="dir_per" name="dir_per" data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      		<label>Genero</label>
                      		<div class="radio">
                      			<label for="masculino"><input type="radio" id="masculino" name="sex_per" value="true" data-fv-notempty="true"/> Masculino</label>
                      			<label for="femenino"><input type="radio"  id="femenino" name="sex_per" value="false" data-fv-notempty="true"/> Femenino</label>
                      		</div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    	<div class="form-group">
                      		<label>Foto</label>
                     		<input type="file" class="form-control file" id="foto1" name="foto1" />
                    	</div>
                    </div>
                  </div>
                    
                  </div>
                  <div class="modal-footer">
                  	<button type="button" class="btn btn-social btn-google" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
                    <button type="button" id="btnAdicionarConfirmacion" class="btn btn-social btn-bitbucket"><i class="glyphicon glyphicon-floppy-disk"></i> Guardar</button>
                  </div>
                </div><!-- /.modal-content -->
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            <div id="modalAdicionarConfirmacion" class="modal modal-primary fade">
  			<div class="modal-dialog modal-sm"  role="document">
    			<div class="modal-content">
      			<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        			<h4 class="modal-title" id="myModalLabel"><span class="fa fa-chevron-circle-right"></span> Mensaje de Confirmacion</h4>
      			</div>
      			<div class="modal-body">
      				<label>¿Esta seguro de realizar esta transaccion?</label>
				</div>
      			<div class="modal-footer">
        			<button type="button" class="btn btn-social btn-google" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
        			<button type="submit" class="btn btn-social btn-bitbucket"><i class="glyphicon glyphicon-ok-sign"></i> Aceptar</button>
      			</div>
    			</div>
  			</div>
			</div>
			</form>
			<form id="formularioModificar"  method="post" action="../usuario/actualizar" enctype="multipart/form-data"
              	data-fv-framework="bootstrap"
              	data-fv-excluded="disabled"
    			data-fv-icon-valid="glyphicon glyphicon-ok"
    			data-fv-icon-invalid="glyphicon glyphicon-remove"
    			data-fv-icon-validating="glyphicon glyphicon-refresh">
			<div  id="modalModificar" class="modal fade">
              <div class="modal-dialog" style="width: 90%">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Modificar Usuario</h4>
                  </div>
                  <div class="modal-body">
                  <div class="row">
                  <input type="hidden" name="cod_per">
                  <div class="col-md-3">
                  	<div class="form-group">
                      <label>Carnet de Identidad</label>
                      <input type="text" class="form-control input-sm" id="ci_per" name="ci_per"
                      data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      	<label>Primer Apellido</label>
                      	<input type="text" class="form-control input-sm" id="priape_per" name="priape_per"
                      	data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      		<label>Telefono</label>
                      		<input type="text" class="form-control input-sm" id="tel_per" name="tel_per"
                      		data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      		<label>Email</label>
                      		<input type="text" class="form-control input-sm" id="ema_per" name="ema_per"
                      		data-fv-notempty="true"
                      		data-fv-emailaddress="true">
                    	</div>
                  </div>
                  <div class="col-md-3">
                  	<div class="form-group">
                      <label>Nombre</label>
                      <input type="text" class="form-control input-sm" id="nom_per" name="nom_per"
                      data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      		<label>Segundo Apellido</label>
                      		<input type="text" class="form-control input-sm" id="segape_per" name="segape_per">
                    </div>
                    <div class="form-group">
                      		<label>Domicilio</label>
                      		<input type="text" class="form-control input-sm" id="dir_per" name="dir_per"
                      		data-fv-notempty="true">
                    </div>
                    <div class="form-group">
                      		<label>Genero</label>
                      		<div class="radio">
                      			<label for="masculino1"><input type="radio" id="masculino1" value="true" name="sex_per" />Masculino</label>
                      			<label for="femenino1"><input type="radio" id="femenino1" value="false" name="sex_per"/>Femenino</label>
                      		</div>
                     		
                    </div>
                  </div>
                  <div class="col-md-6">
                  	<img src="" id="imagen"  width="75px" class="img img-thumbnail" />
                  	<div class="form-group">
                      	<label>Foto</label>
                     	<input type="file" class="form-control input-sm file" id="foto1" name="foto1" placeholder="Ingrese foto" />
                  	</div>
                  </div>
                  </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-social btn-google" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
                    <button type="button" id="btnModificarConfirmacion" class="btn btn-social btn-bitbucket"><i class="glyphicon glyphicon-floppy-disk"></i> Guardar</button>
                  </div>
                </div><!-- /.modal-content -->
               
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            <div id="modalModificarConfirmacion" class="modal modal-primary fade">
  			<div class="modal-dialog modal-sm"  role="document">
    			<div class="modal-content">
      			<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        			<h4 class="modal-title" id="myModalLabel"><span class="fa fa-chevron-circle-right"></span> Mensaje de Confirmacion</h4>
      			</div>
      			<div class="modal-body">
      				<label>¿Esta seguro de realizar esta transaccion?</label>
				</div>
      			<div class="modal-footer">
        			<button type="button" class="btn btn-social btn-google" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
        			<button type="submit" class="btn btn-social btn-bitbucket"><i class="glyphicon glyphicon-ok-sign"></i> Aceptar</button>
      			</div>
    			</div>
  			</div>
			</div>
			 </form>
            <div  id="modalEliminar" class="modal fade">
              <div class="modal-dialog">
              <form id="formularioEliminar"  method="post" action="../usuario/eliminar"
              	data-fv-framework="bootstrap"
              	data-fv-excluded="disabled"
    			data-fv-icon-valid="glyphicon glyphicon-ok"
    			data-fv-icon-invalid="glyphicon glyphicon-remove"
    			data-fv-icon-validating="glyphicon glyphicon-refresh">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Eliminar Usuario</h4>
                  </div>
                  <div class="modal-body">
                  <input type="hidden" id="cod_per" name="cod_per" />
                  	<p><img id="image" name="image" class="img-thumbnail" width="75px"> Esta seguro de eliminar a <label id="usuarioLabel"></label></p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-social btn-google" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
        			<button type="submit" class="btn btn-social btn-bitbucket"><i class="glyphicon glyphicon-ok-sign"></i> Eliminar</button>
                  </div>
                </div><!-- /.modal-content -->
                </form>
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            <div  id="modalActivar" class="modal fade">
              <div class="modal-dialog">
              <form id="formularioActivar"  method="post" action="../usuario/activar"
              	data-fv-framework="bootstrap"
              	data-fv-excluded="disabled"
    			data-fv-icon-valid="glyphicon glyphicon-ok"
    			data-fv-icon-invalid="glyphicon glyphicon-remove"
    			data-fv-icon-validating="glyphicon glyphicon-refresh">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Activar Usuario</h4>
                  </div>
                  <div class="modal-body">
                  <input type="hidden" id="cod_per" name="cod_per" />
                  	<p><img id="image" name="image" class="img-thumbnail" width="75px" src="../../img/fotos/user.png"> Esta seguro de activar a <label id="usuarioLabel2"></label></p>
                  </div>
                  <div class="modal-footer">
                   <button type="button" class="btn btn-social btn-google" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
        			<button type="submit" class="btn btn-social btn-bitbucket"><i class="glyphicon glyphicon-ok-sign"></i> Activar</button>
                  </div>
                </div><!-- /.modal-content -->
                </form>
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            
            <div  id="modalAsignar" class="modal fade">
              <div class="modal-dialog" style="width: 70%">
              <form id="formularioAsignar"  method="post" action="../usuario/guardarAsignacion"
              	data-fv-framework="bootstrap"
              	data-fv-excluded="disabled"
    			data-fv-icon-valid="glyphicon glyphicon-ok"
    			data-fv-icon-invalid="glyphicon glyphicon-remove"
    			data-fv-icon-validating="glyphicon glyphicon-refresh">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Asignar Roles a Usuario</h4>
                  </div>
                  <div class="modal-body">
                  <input type="hidden" id="cod_per" name="cod_per" />
                  	<p><img id="image" name="image" class="img-thumbnail" width="75px" src="../../img/fotos/user.png"> Usuario <label id="usuarioLabel3"></label></p>
                  	<div class="row">
                    <div class="col-lg-4">
                    	<div class="form-group">
                      		<label>Roles</label>
                      		<select id="roles" multiple="multiple" data-fv-notempty name="roles" class="form-control input-md" data-placeholder="Selecccionar..."></select>
                    	</div>
                    </div>
                    <div class="col-lg-4">
                    	<div class="form-group">
                      		<label>Usuario</label>
                      		<input type="text" class="form-control" id="log_dat" name="log_dat" 
                      		data-fv-notempty="true">
                    	</div>
                    </div>
                    <div class="col-lg-4">
                    	<div class="form-group">
                      		<label>Clave</label>
                      		<input type="password" class="form-control" id="cla_dat1" name="cla_dat"  
                      			data-fv-notempty data-fv-different="true" maxlength="32" minlength="8" 
                      			data-fv-different-field="claAnt" 
                      			data-fv-different-message="La nueva clave tiene que ser diferente" />
                      			<div class="progress password-meter" id="passwordMeter">
                					<div class="progress-bar"></div>
            					</div>
                    	</div>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-lg-4">
                    </div>
                    <div class="col-lg-4" >
                    	<div class="form-group" id="claveAnterior" style="display: none;">
                      		<label>Clave Anterior</label>
                      		<input type="hidden" id="cla1" name="cla" /> 
                      		<input type="password" class="form-control" id="claAnt" name="claAnt" placeholder="Ingrese clave anterior" 
                      		data-fv-identical="true"
                      		data-fv-identical-field="cla"
                      		data-fv-identical-message="La clave anterior es incorrecta"
                      		data-fv-notempty="false">
                      		
                    	</div>
                    </div>
                    <div class="col-lg-4">
                    	<div class="form-group">
                      		<label>Confirmar Clave</label>
                      		<input type="password" class="form-control" id="cla2" name="cla2" placeholder="repita clave"
                      		maxlength="32" minlength="8" data-fv-notempty data-fv-identical="true" data-fv-identical-field="cla_dat">
                    	</div>
                    </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-social btn-google" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
        			<button type="submit" class="btn btn-social btn-bitbucket"><i class="glyphicon glyphicon-ok-sign"></i> Guardar</button>
                  </div>
                </div><!-- /.modal-content -->
                </form>
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
          <div class="box">
            <div class="box-header with-border">
            <b style="font-size: 24px;">Gestion Usuarios</b>
            <div class="btn-group pull-right">
			<label class="btn btn-primary active estadoRadio"> <input
				type="radio" name="estado" value="true"  data-toggle="tooltip" data-placement="top" title="Mostrar Activos" checked> Activos
			</label> <label class="btn btn-danger estadoRadio"  data-toggle="tooltip" data-placement="top" title="Mostrar Inactivos"> <input
				type="radio" name="estado" value="false"> Inactivos
			</label>
            </div>
            </div>
            <div class="box-body">
             <table id="tabla" class="table table-striped table-bordered bg-yellow" cellspacing="0" width="100%">
                    <thead>
                      <tr>
                        <th>C.I.</th>
                        <th>Nombre y Apellidos</th>
                        <th>Telefono</th>
                        <th>Domicilio</th>
                        <th>Email</th>
                        <th>Acciones
                        <button class="btn btn-primary active pull-right" id="btnAdicionar"><span class="glyphicon glyphicon-ok-circle"></span> Adicionar <span class="fa fa-plus-circle"></span></button>
                        </th>
                      </tr>
                    </thead>
                    <tbody>

                    </tbody>
                  </table>
            </div><!-- /.box-body -->
          </div><!-- /.box -->
          <script>
      $(document).ready(function(){
    	  $('select').chosen({no_results_text : "No se encuentra:",width : '100%'});
    	  $('#btnAdicionarConfirmacion').click(function(){
  			$('#modalAdicionarConfirmacion').modal('show');
  		});
        $('#btnModificarConfirmacion').click(function(){
        	$('#modalModificarConfirmacion').modal('show');
        });
        $('#btnAdicionar').click(function(){
        	$('#formulario')[0].reset();
			$('#formulario').data('formValidation').resetForm();
			$('#modalAdicionar').modal('show');
        });
  		$('#tabla').dataTable( {
  			dom:"<'row'<'col-sm-3'f><'col-sm-2'l><'col-sm-5'i>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",
			"ordering":false,
  			"oLanguage": {
                "sUrl": "../../js/Spanish.lang"
            },
  			"processing": true,
  		    "serverSide": true,
  		    "ajax": {
  		    	"type": "POST",
  	            "url": "../usuario/lista",
  	        	"data": function ( d ) {
  	                d.estado = $('input[name=estado]:checked').val();
  	            }
          	},
  		    "columns": [
  		                { "data": "ci_per" },
  		                { "data": "ci_per" },
  		                { "data": "tel_per" },
  		                { "data": "dir_per" },
  		                { "data":"ema_per"},
  		                { "data":"cod_per"}
  		    ],
  		    "createdRow": function ( row, data, index ){
  		    	$('td',row).eq(1).html(data.nom_per+' '+data.priape_per+' '+data.segape_per);
  				if($('input[name=estado]:checked').val()=='true'){
  					var btnUser='';
  					if(data.log!=null)btnUser='<button class="btn btn-info asignar" data-id="'+data.cod_per+'"  data-toggle="tooltip" data-placement="top" title="Resignar Datos"><i class="glyphicon glyphicon-eye-open"></i> </button>';
  					else btnUser='<button class="btn btn-success asignar"  data-toggle="tooltip" data-placement="top" title="Asignar Datos" data-id="'+data.cod_per+'"><i class="glyphicon glyphicon-eye-close"></i> </button>';
  					$('td', row).eq(5).html('<div class="btn-group">'+btnUser+'<button class="btn btn-primary modificar"  data-toggle="tooltip" data-placement="top" title="Modificar" data-id="'+data.cod_per+'"><i class="glyphicon glyphicon-edit"></i> </button><button class="btn btn-danger eliminar"  data-toggle="tooltip" data-placement="top" title="Eliminar" data-id="'+data.cod_per+'"><i class="glyphicon glyphicon-remove"></i> </button></div>');
  				}else
  				$('td', row).eq(5).html('<button class="btn btn-primary activar" data-id="'+data.cod_per+'" data-toggle="tooltip" data-placement="top" title="Dar de alta"><i class="glyphicon glyphicon-plus-sign"></i>  </button>');				        
  				$('td',row).addClass('bg-gray');
  		    },
  	        "drawCallback": function( settings ) {
          		$('.eliminar').click(function(){ 
          			$('#formularioEliminar')[0].reset();
              		$.post('../usuario/obtener?cod_per='+$(this).data('id'), function(result) {
  		            	if(result.status==true){
  			    	        $('#modalEliminar').modal('show');
  							$('#formularioEliminar').loadJSON(result.data);
  							$('#usuarioLabel').html(result.data.nom_per+' '+result.data.priape_per+' '+result.data.segape_per);
  							$('#image').attr('src','../../img/fotos/'+result.data.fot_per);				
  		            	}else{
  		            		mostrarMensaje('error','No se realizo con exito la Transacción');
  		            	}
  			        }, 'json');
          		});
          		
          		$('.activar').click(function(){ 
          			$('#formularioActivar')[0].reset();
              		$.post('../usuario/obtener?cod_per='+$(this).data('id'), function(result) {
  		            	if(result.status==true){
  		            		$('#modalActivar').modal('show');
  							$('#formularioActivar').loadJSON(result.data);
  							$('#usuarioLabel2').html(result.data.nom_per+' '+result.data.priape_per+' '+result.data.segape_per);				
  		            	}else{
  		            		mostrarMensaje('error','No se realizo con exito la Transacción');
  		            	}
  			        }, 'json');
          		});
          		
          		$('.asignar').click(function(){ 
          			$('#formularioAsignar').data('formValidation').resetForm();
          			$('#formularioAsignar')[0].reset();
          			$('#log_dat').val('');
          			$bar  = $('#passwordMeter').find('.progress-bar');
          			$bar.html('').css('width', '0%').removeClass().addClass('progress-bar');
              		$.post('../usuario/obtener?cod_per='+$(this).data('id'), function(result) {
  		            	if(result.status==true){
  		            		$('#modalAsignar').modal('show');
  							if(result.data!=null)$('#formularioAsignar').loadJSON(result.data);
  							if(result.datos!=null){
  								$('#cla1').val(result.datos.cla_dat);
  								$('#formularioAsignar').loadJSON(result.datos);
  								$('#claveAnterior').show(500);
  							}else
  								$('#claveAnterior').hide(500);
  							$('#usuarioLabel3').html(result.data.nom_per+' '+result.data.priape_per+' '+result.data.segape_per);
  							$('#roles').html('');
  							$.each(result.roles,function(i,item){
  								var row=$('<option value="'+item.cod_rol+'" '+item.tipo+'>'+item.nom_rol+'</option>');
  								$('#roles').append(row);
  							});
  							$('#roles').trigger('chosen:updated');
  		            	}else{
  		            		mostrarMensaje('error','No se realizo con exito la Transacción');
  		            	}
  			        }, 'json');
          		});
          		$('.modificar').click(function(){
          			$('#formularioModificar').data('formValidation').resetForm();
          			$('#formularioModificar')[0].reset();
              		$.post('../usuario/obtener?cod_per='+$(this).data('id'), function(result) {
  		            	if(result.status==true){
  		            		$('#formularioModificar').loadJSON(result.data);
  		            		$('#imagen').attr('src','../../img/fotos/'+result.data.fot_per);
  		            		$('#modalModificar').modal('show');
  		            	}else{
  		            		mostrarMensaje('error','No se realizo con exito la Transacción');
  		            	}
  			        }, 'json');
          		});
  				$('button[data-toggle="tooltip"]').tooltip({animated: 'fade',placement: 'bottom',});
          	}
  		});
  		$('.estadoRadio').click(function(){
  			$('#tabla').dataTable().fnDraw('page');
  		});
  		$('#formularioAsignar').formValidation(
				{
					fields: {
						cla_dat: {
		                    validators: {
		                        notEmpty: {
		                            message: 'El password es requerido'
		                        },
		                        callback: {
		                            callback: function(value, validator, $field) {
		                                var score = 0;
		                                if (value === '') {
		                                    return {
		                                        valid: true,
		                                        score: null
		                                    };
		                                }
		                                score += ((value.length >= 8) ? 1 : -1);
		                                if (/[A-Z]/.test(value)) {
		                                    score += 1;
		                                }
		                                if (/[a-z]/.test(value)) {
		                                    score += 1;
		                                }
		                                if (/[0-9]/.test(value)) {
		                                    score += 1;
		                                }
		                                if (/[!#$%&^~*_]/.test(value)) {
		                                    score += 1;
		                                }
		                                return {
		                                    valid: true,
		                                    score: score
		                                };
		                            }
		                        }
		                    }
		                }
		            }
			    }		
		).on('success.validator.fv', function(e, data) {
            if (data.field === 'cla_dat' && data.validator === 'callback') {
                var score = data.result.score,
                    $bar  = $('#passwordMeter').find('.progress-bar');
                switch (true) {
                    case (score === null):
                        $bar.html('').css('width', '0%').removeClass().addClass('progress-bar');
                        break;
                    case (score <= 0):
                        $bar.html('Muy Debil').css('width', '25%').removeClass().addClass('progress-bar progress-bar-danger');
                        break;

                    case (score > 0 && score <= 2):
                        $bar.html('Debil').css('width', '50%').removeClass().addClass('progress-bar progress-bar-warning');
                        break;

                    case (score > 2 && score <= 4):
                        $bar.html('Medio').css('width', '75%').removeClass().addClass('progress-bar progress-bar-info');
                        break;

                    case (score > 4):
                        $bar.html('Fuerte').css('width', '100%').removeClass().addClass('progress-bar progress-bar-success');
                        break;
                    default:
                        break;
                }
            }
        }).on('success.form.fv', function(e) {
            e.preventDefault();
            var $form = $(e.target);
            var bv = $form.data('formValidation');
            $.post($form.attr('action'), $form.serialize(), function(result) {
            	if(result.status==true){
            		$('.modal').modal('hide');
      	        	$('#tabla').dataTable().fnDraw('page');
    	     		mostrarMensaje('info','Se realizo con exito la Transacción');
            	}else{
            		mostrarMensaje('error','Error: Ingrese su clave actual correctamente');
            	}           	
            }, 'json');
            $form.data('formValidation').resetForm();
        });
  		$('#formularioEliminar,#formularioActivar').formValidation(
  				{locale: 'es_ES'}).on('success.form.fv', function(e) {
              e.preventDefault();
              var $form = $(e.target);
              $.post($form.attr('action'), $form.serialize(), function(result) {
              	if(result.status==true){
      	            $form.data('formValidation').resetForm();
   	    	 		$('.modal').modal('hide');
      	        	$('#tabla').dataTable().fnDraw('page');
      	        	mostrarMensaje('info','Se realizo con exito la Transacción');
      	        }else{
              		mostrarMensaje('error','No se realizo con exito la Transacción');
              	}
      	    }, 'json');
          });
  		$('#formulario').formValidation({excluded: [':disabled']}).on('success.form.fv', function(e) {
  			e.preventDefault();
  		    $('.bubblingG').show();
  		    var $form = $(e.target);
  		    var formData=new FormData(document.getElementById("formulario"));
  		    $.ajax({
  		        url: $form.attr("action"),
  		        type: "post",
  		        dataType: "json",
  		        data: formData,
  		        cache: false,
  		        contentType: false,
  		        processData: false
  		    	}).done(function(result){
  			    	if(result.status==true){
  			    		$form.data('formValidation').resetForm();
  	   	    	 		$('.modal').modal('hide');
  	      	        	$('#tabla').dataTable().fnDraw('page');
  	      	        	mostrarMensaje('info','Se realizo con exito la Transacción');
  			    	}else{
  			    		mostrarMensaje('error','No se realizo con exito la Transacción');
  			    	}
  			    	$('.bubblingG').hide(); 
  		    });
  		});
  		$('#formularioModificar').formValidation({excluded: [':disabled']}).on('success.form.fv', function(e) {
  			e.preventDefault();
  		    $('.bubblingG').show();
  		    var $form = $(e.target);
  		    var formData=new FormData(document.getElementById("formularioModificar"));
  		    $.ajax({
  		        url: $form.attr("action"),
  		        type: "post",
  		        dataType: "json",
  		        data: formData,
  		        cache: false,
  		        contentType: false,
  		        processData: false
  		    	}).done(function(result){
  			    	if(result.status==true){
  			    		$form.data('formValidation').resetForm();
  	   	    	 		$('.modal').modal('hide');
  	      	        	$('#tabla').dataTable().fnDraw('page');
  	      	        	if(result.data!=null){
  	      	        		$('#imageUser').removeAttr('src');
  	      	        		$('#imageUser1').removeAttr('src');
  	      	        		$('#imageUser2').removeAttr('src');
  	      	        		$('#imageUser1').attr('src','../../img/fotos/'+result.data.fot_per);
	      	        		$('#nameUser1').html(result.data.nom_per+' '+result.data.priape_per+' '+(result.data.segape_per==null?'':result.data.segape_per));
  	      	        		$('#imageUser2').attr('src','../../img/fotos/'+result.data.fot_per);
  	      	        		$('#nameUser2').html(result.data.nom_per+' '+result.data.priape_per+' '+(result.data.segape_per==null?'':result.data.segape_per));
  	      	        		$('#imageUser').attr('src','../../img/fotos/'+result.data.fot_per);
	      	        		$('#nameUser').html(result.data.nom_per+' '+result.data.priape_per+' '+(result.data.segape_per==null?'':result.data.segape_per));
  	      	        	}
  	      	        	mostrarMensaje('info','Se realizo con exito la Transacción');
  			    	}else{
  			    		mostrarMensaje('error','No se realizo con exito la Transacción');
  			    	}
  			    	$('.bubblingG').hide(); 
  		    });
  		});
  		$('#ci').blur(function(){
      	  $.post('../usuario/validar?ci='+$(this).val()	,function(resp){
				if(resp.status==true){
					$('#ci').val('');
					mostrarMensaje('error','Este Ci ya existe!!!');
				}
			});
		});
  		$('#nom_per1').keyup(function(){
  			var xx=$(this).val();
        	  if(xx.indexOf('1')>-1 || xx.indexOf('2')>-1 || xx.indexOf('3')>-1 || xx.indexOf('4')>-1 || xx.indexOf('5')>-1 || xx.indexOf('6')>-1 || xx.indexOf('7')>-1 || xx.indexOf('8')>-1 || xx.indexOf('9')>-1 || xx.indexOf('0')>-1)
        		  mostrarMensaje('error','Solo ingresa letras');
  		});
  		$('#nom_per1').blur(function(){
  			var xx=$(this).val();
        	  if(xx.indexOf('1')>-1 || xx.indexOf('2')>-1 || xx.indexOf('3')>-1 || xx.indexOf('4')>-1 || xx.indexOf('5')>-1 || xx.indexOf('6')>-1 || xx.indexOf('7')>-1 || xx.indexOf('8')>-1 || xx.indexOf('9')>-1 || xx.indexOf('0')>-1)
        		  $(this).val('');
  		});
  	});
      
    </script>